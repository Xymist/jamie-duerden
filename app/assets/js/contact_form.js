function encrypt_if_possible() {
  var openpgp = require('openpgp');
  var key = '-----BEGIN PGP PUBLIC KEY BLOCK----- Version: SKS 1.1.5 Comment: Hostname: pgp.mit.edu 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s3f6-----END PGP PUBLIC KEY BLOCK-----';
  var publicKey = openpgp.key.readArmored(key);
  openpgp.encryptMessage(publicKey.keys, $('#main-input').val()).then(function(pgpMessage) {
    $('#main-input').val(pgp_message);
    $("contact-form").submit();
    return true;
  }).catch(function(error) {
    console.log("Failed to encrypt message; sending in plaintext");
    $("contact-form").submit();
  });
}
